<div class="container">
  @if (orderSent) {
    <mat-card class="success-card">
      <mat-card-header class="header">
        <mat-card-title>Thanks!</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-icon color="primary" class="big-icon">check_circle</mat-icon>
        <p>Thanks for placing your order.</p>
        <p>We'll ship your goods as soon as possible.</p>
      </mat-card-content>
      <mat-card-actions class="actions">
        <button mat-raised-button color="primary" routerLink="store">Return to Store</button>
      </mat-card-actions>
    </mat-card>
  } @else {
    <mat-card class="m-2">
      <mat-card-header>
        <mat-card-title>Checkout Details</mat-card-title>
      </mat-card-header>

      <form #form="ngForm" novalidate (ngSubmit)="submitOrder(form)" class="checkout-form">
        <mat-form-field appearance="outline">
          <mat-label>Name</mat-label>
          <input matInput #name="ngModel" name="name" [(ngModel)]="order.name" required />
          @if (submitted && name.invalid) {
            <mat-error>Please enter your name</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Address</mat-label>
          <input matInput #address="ngModel" name="address" [(ngModel)]="order.address" required />
          @if (submitted && address.invalid) {
            <mat-error>Please enter your address</mat-error>
          }
        </mat-form-field>

        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>City</mat-label>
            <input matInput #city="ngModel" name="city" [(ngModel)]="order.city" required />
            @if (submitted && city.invalid) {
              <mat-error>City is required</mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>State</mat-label>
            <input matInput #state="ngModel" name="state" [(ngModel)]="order.state" required />
            @if (submitted && state.invalid) {
              <mat-error>State is required</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Zip/Postal Code</mat-label>
            <input matInput #zip="ngModel" name="zip" [(ngModel)]="order.zip" required />
            @if (submitted && zip.invalid) {
              <mat-error>Zip code is required</mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Country</mat-label>
            <input
              matInput
              #country="ngModel"
              name="country"
              [(ngModel)]="order.country"
              required
            />
            @if (submitted && country.invalid) {
              <mat-error>Country is required</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="actions">
          <button mat-button type="button" routerLink="/cart">Back</button>
          <button mat-raised-button color="primary" type="submit">Complete Order</button>
        </div>
      </form>
    </mat-card>
  }
</div>
